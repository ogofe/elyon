{% extends "./base.html" %}
{% load static humanize %}


{% block content %}
<style>
  .product-card{
    border-radius: 10px;
    margin-left: auto;
    margin-right: auto;
    max-width: 300px;
  }

  .product-card .image{
    width: 100%;
    height: 200px;
  }

  .product-card .image img{
    width: 100%;
    height: 100%;
    border-radius: 10px;
  }
</style>


<main id="main">

  <div class="py-5 px-2 px-lg-5 contact">  
    <div class="row justify-content-center">
      {% for product in products %}
        <div class="col-sm-6 col-lg-4 my-4">
          <div class="product-card small mx-auto card-body p-3 border-0 shadow-sm">
            <div class="image">
              <img src="{{ product.image.file.url }}" />
            </div>

            <div class="my-2">
              <h4> {{ product.name }} </h4>
              <h5 class="text-muted"> {{ product.price_per_piece }} </h5>
            </div>

            <div class="my-2 text-center">
              <a href="#home" class="btn btn-danger"> Add to order </a>
            </div>
          </div>
        </div>
      {% endfor %}

      {% for product in products %}
        <div class="col-sm-6 col-lg-4 my-4">
          <div class="product-card small card-body p-3 rounded border-0 shadow-sm">
            <div class="image">
              <img src="{{ product.image.file.url }}" />
            </div>

            <div class="my-2">
              <h4> {{ product.name }} </h4>
              <h5 class="text-muted"> {{ product.price_per_piece }} </h5>
            </div>

            <div class="my-2 text-center">
              <a href="#home" class="btn btn-danger"> Add to order </a>
            </div>
          </div>
        </div>
      {% endfor %}


    </div>
  </div>
    
</main>

<!-- Add a counter variable to keep track of the row count -->
<script>
  var itemCount = 1;

  function addOrderItem() {
    // Increment the counter
    itemCount++;

    // Clone the first row
    var newRow = document.getElementById('order-items').getElementsByTagName('tr')[0].cloneNode(true);

    // Update the ID and name attributes of the new row elements
    newRow.id = 'order-item-' + itemCount;
    newRow.querySelector('select').name = 'item-' + itemCount + '-name';
    newRow.querySelector('button').id = itemCount;
    newRow.querySelector('input').name = 'item-' + itemCount + '-qty';

    // Append the new row to the table body
    document.getElementById('order-items').appendChild(newRow);
  }

  function removeOrderItem() {
    // Remove the row with the corresponding ID
    let btn = event.target;
    console.log("Caller:", btn)
    //var rowToRemove = document.getElementById('order-item-' + count);
    //rowToRemove.parentNode.removeChild(rowToRemove);
  }
</script>

{% endblock content %}

